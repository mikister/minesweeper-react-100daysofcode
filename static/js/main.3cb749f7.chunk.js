(this["webpackJsonpminesweeper-react-100daysofcode"]=this["webpackJsonpminesweeper-react-100daysofcode"]||[]).push([[0],{16:function(e,t,n){e.exports=n(30)},21:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var s=n(1),l=n.n(s),a=n(14),r=n.n(a),c=(n(21),n(2)),i=n.n(c),o=n(15),u=n(9),h=n(3),f=n(4),d=n(6),p=n(5),m=n(7),v=(n(23),n(24),n(10)),g=n(12),b=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(f.a)(t,[{key:"onCellClick",value:function(){this.props.cellClick(this.props.cellIndex)}},{key:"onCellFlag",value:function(e){this.props.cellFlag(this.props.cellIndex),e.preventDefault()}},{key:"renderContent",value:function(){return this.props.flaged?l.a.createElement(v.a,{icon:g.b}):""===this.props.content?null:"b"===this.props.content?l.a.createElement(v.a,{icon:g.a}):l.a.createElement("span",null,this.props.content)}},{key:"render",value:function(){return l.a.createElement("div",{className:"cell "+(this.props.revealed?"cell--revealed ":"")+(this.props.flaged?"cell--flaged ":""),onClick:this.onCellClick.bind(this),onContextMenu:this.onCellFlag.bind(this)},this.renderContent())}}]),t}(s.Component),C=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).setAsyncState=function(e){return new Promise((function(t){return n.setState(e,(function(){return t()}))}))},n.cellClick=function(){var e=Object(u.a)(i.a.mark((function e(t){var s,l,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.contentGenerated){e.next=4;break}return e.next=3,n.generateCellContents(t);case 3:n.setState({contentGenerated:!0});case 4:if(!1!==n.state.cellsRevealed[t]||!1!==n.state.cellsFlaged[t]){e.next=12;break}return(s=n.state.cellsRevealed)[t]=!0,e.next=9,n.setAsyncState({cellsRevealed:s});case 9:n.checkCell(t),e.next=13;break;case 12:!0===n.state.cellsRevealed[t]&&""!==n.state.cellContents[t]&&(l=n.getNeighboringCells(t),a=Object(o.a)(l),r=0,l.forEach((function(e){if(n.state.cellsFlaged[e]&&r++,n.state.cellsFlaged[e]||n.state.cellsRevealed[e])for(var t=0;t<a.length;t++)a[t]===e&&a.splice(t,1)})),r===parseInt(n.state.cellContents[t])&&a.forEach((function(e){n.cellClick(e)})));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.checkCell=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"b"===n.state.cellContents[t]?n.gameOver():""===n.state.cellContents[t]&&n.getNeighboringCells(t).forEach((function(e){"b"!==n.state.cellContents[e]&&n.cellClick(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={cellContents:[],cellsRevealed:[],cellsFlaged:[],bombCount:30,contentGenerated:!1,colsNum:10,rowsNum:18},n.gridRef=l.a.createRef(),n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.rowsNum*this.state.colsNum;this.gridRef.current.style.setProperty("--larger-dimension",this.state.rowsNum),this.gridRef.current.style.setProperty("--smaller-dimension",this.state.colsNum),this.setState({cellContents:Array(e).fill(""),cellsRevealed:Array(e).fill(!1),cellsFlaged:Array(e).fill(!1)})}},{key:"getNeighboringCells",value:function(e){var t=[],n=this.state.rowsNum*this.state.colsNum,s=e-this.state.colsNum,l=e+this.state.colsNum;return s>0&&(t.push(s),(e+1)%this.state.colsNum!==1&&t.push(s-1),(e+1)%this.state.colsNum!==0&&t.push(s+1)),(e+1)%this.state.colsNum!==1&&t.push(e-1),(e+1)%this.state.colsNum!==0&&t.push(e+1),l<n&&(t.push(l),(e+1)%this.state.colsNum!==1&&t.push(l-1),(e+1)%this.state.colsNum!==0&&t.push(l+1)),t}},{key:"renderGrid",value:function(){for(var e=[],t=0;t<this.state.colsNum*this.state.rowsNum;t++)e.push(l.a.createElement(b,{cellClick:this.cellClick.bind(this),cellFlag:this.cellFlag.bind(this),content:this.state.cellContents[t],revealed:this.state.cellsRevealed[t],flaged:this.state.cellsFlaged[t],cellIndex:t,key:t}));return e}},{key:"generateCellContents",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.state.rowsNum*this.state.colsNum,s=0,l=Array(n).fill(""),a=[],r=function(){var r=Math.floor(Math.random()*n);if("b"!==l[r])if(null===t)l[r]="b",s++;else{if(r===t)return"continue";if(a=e.getNeighboringCells(t),c=!1,a.forEach((function(e){e===r&&(c=!0)})),c)return"continue";l[r]="b",s++}};s<this.state.bombCount;){var c;r()}for(var i=0;i<n;i++)if("b"!==l[i]){var o=0;(a=this.getNeighboringCells(i)).forEach((function(e){"b"===l[e]&&o++})),o>0&&(l[i]=o.toString())}return this.setAsyncState({cellContents:l})}},{key:"cellFlag",value:function(e){if(!this.state.cellsRevealed[e]){var t=this.state.cellsFlaged;t[e]=!t[e],this.setState({cellsFlaged:t})}}},{key:"gameOver",value:function(){var e=this.state.rowsNum*this.state.colsNum;this.setState({cellsRevealed:Array(e).fill(!0)})}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"header"},l.a.createElement("h1",null,"Minesweeper")),l.a.createElement("div",{className:"grid-wrapper"},l.a.createElement("main",{className:"grid",ref:this.gridRef},this.renderGrid.bind(this)())))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.3cb749f7.chunk.js.map